<div class="book-form-container">
    <h2>{{ isEditMode ? '✏️ Editar Libro' : '➕ Añadir Libro' }}</h2>

    <div *ngIf="loading" class="loading">
        Cargando...
    </div>

    <div *ngIf="error" class="error">
        {{ error }}
    </div>

    <form *ngIf="!loading" (ngSubmit)="onSubmit()" #bookForm="ngForm" class="book-form">
        <div class="form-group">
            <label for="title">Título *</label>
            <input type="text" id="title" name="title" [(ngModel)]="book.title" required #title="ngModel">
            <span *ngIf="title.invalid && title.touched" class="error-msg">
                El título es obligatorio
            </span>
        </div>

        <div class="form-group">
            <label for="author">Autor *</label>
            <input type="text" id="author" name="author" [(ngModel)]="book.author" required #author="ngModel">
            <span *ngIf="author.invalid && author.touched" class="error-msg">
                El autor es obligatorio
            </span>
        </div>

        <div class="form-group">
            <label for="year">Año *</label>
            <input type="number" id="year" name="year" [(ngModel)]="book.year" required min="1000" max="2100"
                #year="ngModel">
            <span *ngIf="year.invalid && year.touched" class="error-msg">
                El año debe ser válido
            </span>
        </div>

        <div class="form-group">
            <label for="genre">Género *</label>
            <input type="text" id="genre" name="genre" [(ngModel)]="book.genre" required #genre="ngModel">
            <span *ngIf="genre.invalid && genre.touched" class="error-msg">
                El género es obligatorio
            </span>
        </div>

        <div class="form-group">
            <label for="description">Descripción</label>
            <textarea id="description" name="description" [(ngModel)]="book.description" rows="4"></textarea>
        </div>

        <div class="form-actions">
            <button type="button" (click)="cancel()" class="btn btn-cancel">Cancelar</button>
            <button type="submit" [disabled]="bookForm.invalid" class="btn btn-save">
                {{ isEditMode ? 'Guardar Cambios' : 'Crear Libro' }}
            </button>
        </div>
    </form>
</div>